<div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
        <div class="col-md-3 border-right">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5"
                    width="150px"
                    src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg"><span
                    class="font-weight-bold">{{profile.name}}</span><span
                    class="text-black-50"></span><span>{{profile.email}} </span>
                    <h6>ref id:<input type="text" value="{{profile.number}}" id="myInput" disabled></h6>
                    <button onclick="copyRef()">Copy Referel id</button></div>
                    
            {{!-- <div class="align-items-center "><a href="/password">change password</a></div> --}}

            <div class="accordion accordion-borderless" id="accordionFlushExampleX">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingOneX">
                        <button class="accordion-button" type="button" data-mdb-toggle="collapse"
                            data-mdb-target="#flush-collapseOneX" aria-expanded="true"
                            aria-controls="flush-collapseOneX">
                            Saved Address
                        </button>
                    </h2>
                    <div id="flush-collapseOneX" class="accordion-collapse collapse show"
                        aria-labelledby="flush-headingOneX" data-mdb-parent="#accordionFlushExampleX">
                        <div class="accordion-body">
                            {{#each address}}
                            <div class="card" style="width: 18rem;">
                                <div class="card-body">
                                    <button class="btn float-right"  onclick="sweetAlert('{{this._id}}','{{this.no}}')" ><i
                                        class="fa fa-trash"></i></button>
                                    <p class="card-text">{{this.name}} </p>
                                    <p name="email" {{this.email}} <br></p>
                                    <p name="mobile"> {{this.number}} <br></p>
                                    <p name="address"> {{this.address}} <br></p>
                                    <p name="state"> {{this.state}} <br></p>
                                    <p name="pincode"> {{this.pincode}}</p>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    
                    <h2 class="accordion-header" id="flush-headingTwoX">
                    {{!-- {{#each wallet}} --}}
                        <button class="accordion-button collapsed" type="button" data-mdb-toggle="collapse"
                            data-mdb-target="#flush-collapseTwoX" aria-expanded="false"
                            aria-controls="flush-collapseTwoX">
                            <i class="fas fa-wallet"></i>&nbsp; Balance Rs.{{wallet.amount}}
                        </button>
                    </h2>
                    <div id="flush-collapseTwoX" class="accordion-collapse collapse" aria-labelledby="flush-headingTwoX"
                        data-mdb-parent="#accordionFlushExampleX">
                        <h6 class="headinggg" style="font-size: 30px;">Wallet History</h6>
                        <div class="accordion-body">
                            {{#each wallet.transactions}}
                            <div class="card" style="width: 18rem;">
                                <div class="card-body">
                                    <p class="card-text">{{this.transactiondescription}}</p>
                                    <p >{{this.transactionAmount}}</p>
                                    <p name="mobile"> {{this.type}} <br></p>
                                    <p name="address"> {{this.transactionDate}} <br></p>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                    {{!-- {{/each}} --}}
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingThreeX">
                        <button class="accordion-button collapsed" type="button" data-mdb-toggle="collapse"
                            data-mdb-target="#flush-collapseThreeX" aria-expanded="false"
                            aria-controls="flush-collapseThreeX">
                            Change Password
                        </button>
                    </h2>
                    <div id="flush-collapseThreeX" class="accordion-collapse collapse"
                        aria-labelledby="flush-headingThreeX" data-mdb-parent="#accordionFlushExampleX">
                        <div class="accordion-body">
                            <a href="/password">change password</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="col-md-5 border-right">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="text-right">Profile Settings</h4>
                </div>
                <form action="/edit-profile/{{user._id}}" method="post">
                    <div class="row mt-2">
                        <div class="col-md-6"><label class="labels">Name</label><input type="text" class="form-control"
                                placeholder="name" name="name" value="{{profile.name}}"></div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-12"><label class="labels">Mobile Number</label><input type="text"
                                class="form-control" placeholder="enter phone number" name="number"
                                value="{{profile.number}}"></div>
                        {{!-- <div class="col-md-12"><label class="labels">Address </label><input type="text"
                                class="form-control" placeholder="address" value="{{profile.address}}" name="address">
                        </div>
                        <div class="col-md-12"><label class="labels">Pincode</label><input type="text"
                                class="form-control" placeholder="pincode" value="{{profile.pincode}}" name="pincode">
                        </div>
                        <div class="col-md-12"><label class="labels">State</label><input type="text"
                                class="form-control" placeholder="state" value="{{profile.state}}" name="state"></div>
                        --}}
                        <div class="col-md-12"><label class="labels">Email ID</label><input type="text"
                                class="form-control" placeholder="  email" value="{{profile.email}}" name="email"></div>
                    </div>
                    <div class="mt-5 text-center">
                        <button class="btn btn-primary profile-button" type="submit">Save Profile</button>
                    </div>
                </form>
            </div>
        </div>


        <div class="col-md-4">
            <div class="p-3 py-5">
                <form action="/address-saved-profile" method="post">
                    <div class="d-flex justify-content-between align-items-center experience"><span>Add Address</span>
                    </div>
                    <br>
                    <input type="text" class="form-control" name="name" value="{{profile.name}}" hidden>
                    <input type="text" name="userId" id="" value="{{user._id}}" hidden>
                    <input type="text" class="form-control" id="c_diff_email_address" name="email"
                        value="{{profile.email}}" hidden>
                    <input type="text" class="form-control" id="c_diff_phone" name="number" value="{{profile.number}}"
                        hidden>
                    <div class="col-md-12"><label class="labels">Address</label><input type="text" class="form-control"
                            placeholder="Address" name="address"></div> <br>
                    <div class="col-md-12"><label class="labels">State</label><input type="text" class="form-control"
                            placeholder="State" name="state"></div> <br>
                    <div class="col-md-12"><label class="labels">pincode</label><input type="text" class="form-control"
                            placeholder="Pincode" name="pincode"></div>
                    <div class="col-md-12 mt-2">
                        <button class="btn btn-primary" type="submit">submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</div>
</div>



<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
    function removeAddress(addressId, addressno) {
      $.ajax({
        url: '/delete-saved-address',
        data: {
          addressId,
          addressno
        },
        method: 'post',
        success: (response) => {
          if (response.removeAddress) {
            location.reload();
          }
        }
      })
    }


    function sweetAlert(addressId, addressno) {
      console.log('1')
      swal({
        title: "Are you sure?",
        text: "Once deleted, you will not be able to recover this Address",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
        .then((willDelete) => {
          if (willDelete) {
            removeAddress(addressId, addressno);
            swal("Address deleted succesfully..", {
              icon: "success",
            });            
          } else {
            swal("Address is safe");
          }
        });
    }

</script>





<script>
function copyRef() {
  // Get the text field
  var copyText = document.getElementById("myInput");

  // Select the text field
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices

  // Copy the text inside the text field
  navigator.clipboard.writeText(copyText.value);




copied();
function copied(){
    console.log('lo')
    swal("Copied!", "Copied to clip board", "success");
}
  
}
</script>